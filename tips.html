<!DOCTYPE html>
<html lang="nl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Front de Mer - Tips Map</title>

<link href='https://api.mapbox.com/mapbox-gl-js/v2.19.0/mapbox-gl.css' rel='stylesheet' />
<script src='https://api.mapbox.com/mapbox-gl-js/v2.19.0/mapbox-gl.js'></script>

<style>
body { margin:0; font-family:Arial,sans-serif; color:#333; }
header { background:#2E8B57; color:white; padding:1rem; text-align:center; }
.lang-btn { margin:0 0.5rem; padding:0.4rem 0.8rem; border:none; border-radius:4px; cursor:pointer; font-weight:bold; }
.lang-btn:hover { background:#fff; color:#2E8B57; }
#map { width:100%; height:500px; }
ul { list-style-type: disc; margin:1rem 2rem; }
li { cursor:pointer; margin:0.5rem 0; }
</style>
</head>
<body>

<header>
<h1>Front de Mer - Tips & Activiteiten</h1>
<button class="lang-btn" onclick="showLang('nl')">NL</button>
<button class="lang-btn" onclick="showLang('fr')">FR</button>
<button class="lang-btn" onclick="showLang('en')">EN</button>
</header>

<div id="map"></div>

<h2>Locaties</h2>
<ul id="tips-list"></ul>

<script>
mapboxgl.accessToken = 'pk.eyJ1IjoiYW5kcmF3YWFnIiwiYSI6ImNtaWFkcjRxMTBiaTAya3FwcjJodzl1bDIifQ.Eb3w10-AlZPCvvcn5R8QJA'; // <--- vervang door jouw token
let map = new mapboxgl.Map({
    container: 'map',
    style: 'mapbox://styles/mapbox/streets-v12',
    center: [3.0850, 42.465],
    zoom: 13
});

let currentLang = 'nl';
let tipsData = [];

// Laad JSON met tips
async function loadTips() {
  try {
    const resp = await fetch('tips-mapbox.json');
    tipsData = await resp.json();
    renderTips(currentLang);
  } catch(e){
    console.error("Kon tips niet laden:", e);
  }
}

// Render lijst en markers
function renderTips(lang){
  currentLang = lang;
  const list = document.getElementById('tips-list');
  list.innerHTML = '';

  // Verwijder bestaande markers
  if(map.markers) map.markers.forEach(m => m.remove());
  map.markers = [];

  tipsData[lang].forEach(item => {
    // Voeg marker toe
    const marker = new mapboxgl.Marker({color:getMarkerColor(item.type)})
      .setLngLat([item.lon, item.lat])
      .setPopup(new mapboxgl.Popup({offset:25}).setText(item.naam))
      .addTo(map);
    map.markers.push(marker);

    // Voeg lijst-item toe
    const li = document.createElement('li');
    li.textContent = item.naam;
    li.dataset.lat = item.lat;
    li.dataset.lon = item.lon;
    li.addEventListener('click', ()=>{
      map.flyTo({center:[item.lon,item.lat], zoom:15});
      marker.togglePopup();
    });
    list.appendChild(li);
  });
}

function getMarkerColor(type){
  switch(type){
    case 'wandeling': return 'green';
    case 'toerisme': return 'blue';
    case 'wijn': return 'purple';
    case 'parkeren': return 'orange';
    default: return 'red';
  }
}

// Taalwissel
function showLang(lang){
  renderTips(lang);
}

// Init
loadTips();
</script>

</body>
</html>
